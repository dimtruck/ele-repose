#!/bin/sh

JAVA_HOME=/usr/lib/jvm/jdk1.8.0_60
JAVA_BIN=${JAVA_HOME}/bin/java
CONFIG_DIRECTORY=/etc/repose
USER=repose
NAME=repose-valve
DAEMON_HOME=/usr/share/repose
REPOSE_JAR=${DAEMON_HOME}/${NAME}.jar
JAVA_OPTS="-server -Xms<%= node[:repose][:jvm_minimum_heap_size] %> -Xmx<%= node[:repose][:jvm_maximum_heap_size] %> -XX:+UseG1GC"
RUN_OPTS="-c $CONFIG_DIRECTORY"

exec chpst -u repose -- ${JAVA_BIN} ${JAVA_OPTS} -jar ${REPOSE_JAR} ${RUN_OPTS} 2>&1

